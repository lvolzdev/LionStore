{% extends 'base.html' %}
{% load static %}

{% block head %}
<title>ÏÉÅÌíàÎ≥Ñ ÎîîÌÖåÏùº ÌéòÏù¥ÏßÄ</title>
<!-- ÏÉÅÌíàÎ≥Ñ ÎîîÌÖåÏùº ÌéòÏù¥ÏßÄ
     ÏÉÅÌíà Ï†ïÎ≥¥, Î¶¨Î∑∞ Î™©Î°ù, Ïõπ ÌåêÎß§ Ï†ïÎ≥¥ Î™©Î°ù, Î¨∏Íµ¨Ï†ê Ï†ïÎ≥¥ Î™©Î°ùÏù¥ ÎÖ∏Ï∂úÎê® -->
<style>
     #mainContainer {
          width: 80%;
          text-align: center;
          margin: 2rem auto;
     }
     #product_image {
          display: block;
          max-width: 700px;
          max-height: 550px;
          width: auto;
          height: auto;
     }
     #no_review_message {
          text-align: center;
     }
     #no_review_message div {
          font-family: 'yg-jalnan';
          color:#663e27;
     }
     iframe {
          display:block; 
          width:70vw; 
          height: 80vh
     }
     @font-face {
        font-family: 'yg-jalnan';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.2/JalnanOTF00.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    @font-face {
        font-family: 'NanumSquareRound';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }
    
</style>
{% endblock %}

{% block content %}

<div class="container" id="mainContainer">
     <p id="link_nav" style="text-align: left; margin-left: 0.4rem; margin-bottom: 0.5rem;">
          <a href="{% url 'productList' product.category.id %}"><i class="fa fa-bars" aria-hidden="true"></i></i>{{ product.category.categoryName }}</a> >
          <span id="current_location">{{ product }}</span>
      </p>
     <div class="container" id="imageContainer">
          <div class="row">
               <img class="col" id="product_image" src="{{ product.productImage.url }}" alt="{{ product.name }} Ïù¥ÎØ∏ÏßÄ">
               
               <div class="col" style="padding: 0rem 4.5rem; text-align: left;">
                    <div class="row" style="display: grid; grid-template-rows: 0.1fr 0.5fr 0.3fr 0.01fr;">
                         <div style="text-align: left;">
                              {% if tags %}
                                   {% for tag in tags %}
                                   <a class="badge badge-pill badge-warning" style="font-family: 'NanumSquareRound'; font-size: 18px;" href="{% url 'tagProduct' tag.id %}">{{ tag }}</a>
                                   {% endfor %}
                              {% else %}
                                   <span class="badge badge-pill badge-danger">No TAG</span>
                              {% endif %}
                         </div>
                         <div style="margin-bottom: 1rem;">
                              <div style="font-family: 'yg-jalnan'; font-size: 38px;">{{ product.name }}</div>
                         </div>
                         <div style="margin-bottom: 1rem;">
                              <div style="font-family: 'NanumSquareRound'; font-size: 18px; letter-spacing :1.4px;"> Ï†úÏ°∞ÏÇ¨</div>
                              <div style="font-family: 'NanumSquareRound'; font-size: 30px;">{{ product.manufacturer }}</div>
                         </div>

                         <div style="margin-bottom: 1rem;">
                              <div style="font-family: 'NanumSquareRound'; font-size: 18px;">{{ product.description }}</div>
                         </div>

                         <hr style="width: 440px;">

                         <div>
                              <div style="text-align: left;">
                                   <div style="font-family: 'NanumSquareRound'; font-size: 25px; font-weight: bold;">Ï¥ùÏ†ê</div>
                                   <div class="rateit svg" data-rateit-value="{{avr_totalScore}}" data-rateit-readonly="true" data-rateit-starwidth="15"
                                        step="0.1" data-rateit-starheight="15"></div>
                              </div>
                              <div class="scoreContainer" style="margin-top: 1.5rem;">
                                   <div class="row">
                                        <div class="col">
                                             <div style="font-family: 'NanumSquareRound'; font-size: 20px; font-weight: bold;">Í∑∏Î¶ΩÍ∞ê</div>
                                             <div class="rateit svg" data-rateit-value="{{avr_gripScore}}" data-rateit-readonly="true"
                                                  aria-valuenow="{{avr_gripScore}}" data-rateit-starwidth="15" data-rateit-starheight="15"></div>
                                        </div>
               
                                        <div class="col">
                                             <div style="font-family: 'NanumSquareRound'; font-size: 20px; font-weight: bold;">ÏàòÎ™Ö</div>
                                             <div class="rateit svg" data-rateit-value="{{avr_lifeScore}}" data-rateit-readonly="true" data-rateit-starwidth="15"
                                                  data-rateit-starheight="15"></div>
                                        </div>
                                   </div>
                                   <div class="row">
                                        <div class="col">
                                             <div style="font-family: 'NanumSquareRound'; font-size: 20px; font-weight: bold;">ÎÇ¥Íµ¨ÎèÑ</div>
                                             <div class="rateit svg" data-rateit-value="{{avr_durabilityScore}}" data-rateit-readonly="true"
                                                  data-rateit-starwidth="15" data-rateit-starheight="15"></div>
                                        </div>
                                        <div class="col">
                                             <div style="font-family: 'NanumSquareRound'; font-size: 20px; font-weight: bold;">ÎîîÏûêÏù∏</div>
                                             <div class="rateit svg" data-rateit-value="{{avr_designScore}}" data-rateit-readonly="true" data-rateit-starwidth="15"
                                                  data-rateit-starheight="15"></div>
                                        </div>
                                   </div>
                              </div>
                              <div class="row">
                                   <div class="col">
                                        <div style="font-family: 'NanumSquareRound'; font-size: 20px; font-weight: bold;">ÏÇ¨Ïö©Í∞ê</div>
                                        <div class="rateit svg" data-rateit-value="{{avr_textureScore}}" data-rateit-readonly="true" data-rateit-starwidth="15"
                                        data-rateit-starheight="15"></div>
                                   </div>
          
                                   <div class="col">
                                        <div style="font-family: 'NanumSquareRound'; font-size: 20px; font-weight: bold;">Í∞ÄÏÑ±ÎπÑ</div>
                                        <div class="rateit svg" data-rateit-value="{{avr_costEffetivenessScore}}" data-rateit-readonly="true"
                                        data-rateit-starwidth="15" data-rateit-starheight="15"></div>
                                   </div>
                              </div>                    
                              </div>
                         </div>
                    </div>
               </div>
          </div>
     </div>
</div>



<div style="width: 85%; text-align: right;">
     {{ likeMessage }}
     <a href="{% url 'productLikeProcess' product_id=product.id %}">
          {% if userLike %}
          <!-- Ïú†Ï†ÄÍ∞Ä Ï¢ãÏïÑÏöîÎ•º ÎàÑÎ•∏ Í≤ΩÏö∞ -->
          ‚ù§Ô∏è
          {% else %}
          <!-- Ïú†Ï†ÄÍ∞Ä Ï¢ãÏïÑÏöîÎ•º ÎàÑÎ•¥ÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ -->
          üñ§
          {% endif %}
     </a>
</div>

<hr style="width: 70%;">

<div id="reviewContainer" style="padding: 0 15%">
     <!-- Ïù∏Í∏∞Ïàú Ï†ïÎ†¨Î°ú Ï†ÑÌôò -->
     {% if popularitySort %}
     <div class="h6" style="text-align: left; font-family: 'yg-jalnan'; padding-left: 0.3rem;"><i class="fa fa-sort" aria-hidden="true"></i><span>Ïù∏Í∏∞Ïàú Ï†ïÎ†¨</span> / <span><a href="{% url 'productDetail' product.id %}?sort=new">ÏµúÏã†ÏàúÏ†ïÎ†¨</a></span></div>
     <!-- ÏµúÏã†Ïàú Ï†ïÎ†¨Î°ú Ï†ÑÌôò -->
     {% else %}
     <div class="h6" style="text-align: left; font-family: 'yg-jalnan'; padding-left: 0.3rem;"><i class="fa fa-sort" aria-hidden="true"></i><span><a href="{% url 'productDetail' product.id %}?sort=popularity">Ïù∏Í∏∞Ïàú Ï†ïÎ†¨</a></span> / <span>ÏµúÏã†ÏàúÏ†ïÎ†¨</span></div>
     {% endif %}

     {% if hasReviews %}
     <div class="row property__gallery">
          {% for review in reviews %}
          <div class="col-lg-3 col-md-4 col-sm-6 mix women">
               <div class="product__item">
                    <div class="product__item__pic set-bg" data-setbg="{{ review.reviewImage1.url }}">
                         <ul class="product__hover">
                              <li><a href="{{ review.reviewImage1.url }}" class="image-popup"><span
                                             class="arrow_expand"></span></a></li>
                         </ul>
                    </div>
                    <div class="product__item__text">
                         <h6><a href="{% url 'reviewDetail' review.id %}">{{ review }}</a></h6>
                         <div class="rating">
                              <div class="rateit svg" data-rateit-value="{{ review.totalScore }}" data-rateit-readonly="true"
                                   data-rateit-starwidth="15" data-rateit-starheight="15">
                              </div>
                         </div>
                    </div>
               </div>
          </div>
          {% endfor %}
     </div>
     {% else %}
     <div id="no_review_message">
          <div>ÏïÑÏßÅ Î¶¨Î∑∞Í∞Ä ÏóÜÎÑ§Ïöî!</div>
          <div>Í∞ÄÏû• Î®ºÏ†Ä ÏûëÏÑ±Ìï¥Î≥¥ÏãúÎäîÍ±¥ Ïñ¥Îñ®ÍπåÏöî?</div>
     </div>
     {% endif %}

     {% if not reviewCreated %}
     <!-- Î¶¨Î∑∞Î•º ÏûëÏÑ±ÌïòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ -->
     <a class="badge badge-pill badge-warning" style="font-family: 'NanumSquareRound'; font-size: 18px;" href="{% url 'reviewCreate' product.id %}"><div style="padding-left: 0.3rem; text-align: right;">ÏÉà Î¶¨Î∑∞ ÏûëÏÑ±</div></a>
     {% else %}
     <!-- Î¶¨Î∑∞Î•º Ïù¥ÎØ∏ ÏûëÏÑ±Ìïú Í≤ΩÏö∞ -->
     <a class="badge badge-pill badge-warning" style="font-family: 'NanumSquareRound'; font-size: 18px;" href="{% url 'reviewDetail' myReview.id %}">ÏûëÏÑ±Ìïú Î¶¨Î∑∞ Î≥¥Í∏∞</a>
     {% endif %}
     <!-- ÌéòÏù¥ÏßÄÎÑ§Ïù¥ÏÖò -->
     <div class="pagination__option" style="text-align: center;">
          {% if reviews.has_previous %}
          <a href="?page=1&sort={{ sortBy }}"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
          <a href="?page={{ reviews.previous_page_number }}&sort={{ sortBy }}"><i class="fa fa-angle-left"></i></a>
          {% else %}
          <a href="?page=1&sort={{ sortBy }}"><i class="fa fa-angle-double-left" aria-hidden="true"></i></a>
          <a href="#"><i class="fa fa-step-backward" aria-hidden="true"></i></a>
          {% endif %}
          <span>{{ reviews.number }}</span>
          <span>/</span>
          <span>{{ reviews.paginator.num_pages }}</span>
          {% if reviews.has_next %}
          <a href="?page={{ reviews.next_page_number }}&sort={{ sortBy }}"><i class="fa fa-angle-right"></i></a>
          <a href="?page={{ reviews.paginator.num_pages }}&sort={{ sortBy }}"><i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
          {% else %}
          <a href="#"><i class="fa fa-step-forward" aria-hidden="true"></i></a>
          <a href="?page={{ reviews.paginator.num_pages }}&sort={{ sortBy }}"><i class="fa fa-angle-double-right"
                    aria-hidden="true"></i></a>
          {% endif %}
     </div>

</div>

<hr style="width: 70%;">

<table id="webSellInfos" class="table table-bordered table-hover"
     style="text-align: center; width: 70%; margin: auto auto;">
     <caption style="caption-side: top; font-family: 'yg-jalnan'; color: black;"><i class="fa fa-krw" aria-hidden="true"
               style="font-weight: bold;"></i>Îì±Î°ùÎêú ÌåêÎß§Ï†ïÎ≥¥</caption>
     {% if user.is_WebSeller %}
     <caption style="caption-side: bottom; text-align: right;">
          {% if webSellInfoRegistered %}
          <a href="{% url 'webSellInfoDelete' product_id=product.id webSellInfo_id=targetWebSellInfo.id %}">ÌåêÎß§Ï†ïÎ≥¥ ÏÇ≠Ï†úÌïòÍ∏∞</a> /
          <a href="{% url 'webSellInfoModify' product_id=product.id webSellInfo_id=targetWebSellInfo.id %}">ÌåêÎß§Ï†ïÎ≥¥ ÏàòÏ†ïÌïòÍ∏∞</a>
          {% else %}
          <a href="{% url 'webSellInfoCreate' product_id=product.id %}">Ïõπ ÌåêÎß§Ï†ïÎ≥¥ Ï∂îÍ∞Ä</a>
          {% endif %}
     </caption>
     {% endif %}
     <thead>
          <tr>
               <th style="background-color: hsl(32, 81%, 44%); color: white;">ÌåêÎß§Ïûê</th>
               <th style="background-color: hsl(32, 81%, 44%); color: white;">Í∞ÄÍ≤©</th>
               <th style="background-color: hsl(32, 81%, 44%); color: white;">ÎßÅÌÅ¨</th>
          </tr>
     </thead>
     <tbody>
          {% if hasWebSellInfo %}
          {% for info in webSellInfoList %}
          <tr>
               <td id="webSellInfo_seller">
                    {{ info.seller.nickname }}
               </td>
               <td id="webSellInfo_price">
                    {{ info.price }}
               </td>
               <td id="webSellInfo_link">
                    <a href="{% url 'redirectExternalLink' info.link %}">{{ info.link }}<i class="fa fa-external-link"
                              aria-hidden="true"></i></a>
               </td>
          </tr>
          {% endfor %}
          {% else %}
          <tr>
               <td colspan="3">ÏïÑÏßÅ ÌåêÎß§Ï†ïÎ≥¥Í∞Ä Îì±Î°ùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.</td>
          </tr>
          {% endif %}
     </tbody>
</table>
<br>

{% if hasStationerSellInfo %}
     <!-- Î¨∏Íµ¨Ï†ê ÌåêÎß§Ï†ïÎ≥¥Í∞Ä Îì±Î°ùÎêú Í≤ΩÏö∞ -->
     {% if nullLocation %}
          <!-- ÏúÑÏπò Ï†ïÎ≥¥Í∞Ä ÏûÖÎ†•ÎêòÏñ¥ ÏûàÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ -->
          <div>ÏúÑÏπò Ï†ïÎ≥¥Í∞Ä ÏûÖÎ†•ÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.</div>
          <div>ÏßÄÎèÑ Í∏∞Îä•ÏùÑ Ïù¥Ïö©ÌïòÏãúÎ†§Î©¥ <a href="{% url 'setLocation' %}">ÏúÑÏπòÎ•º ÏÑ§Ï†ï</a>Ìï¥Ï£ºÏÑ∏Ïöî.</div>
     {% else %}
          <!-- ÏúÑÏπò Ï†ïÎ≥¥Í∞Ä ÏûÖÎ†•ÎêòÏñ¥ ÏûàÎäî Í≤ΩÏö∞ -->
          <div style="font-family: 'yg-jalnan'; color: black; width: 70%; margin: 0 auto; padding: 12px 0;"><i class="fa fa-map-marker" aria-hidden="true"></i> Î¨∏Íµ¨Ï†ê ÌåêÎß§ Ï†ïÎ≥¥</div>
          <div id="map" style="width:70%; height:30em; margin: 0 auto;"></div>
     {% endif %}
{% else %}
     <!-- Î¨∏Íµ¨Ï†ê ÌåêÎß§Ï†ïÎ≥¥Í∞Ä Îì±Î°ùÎêòÏßÄ ÏïäÏùÄ Í≤ΩÏö∞ -->
     <div style="font-family: 'yg-jalnan'; color: red; width: 70%; margin: 0 auto; padding: 12px 0;"><i class="fa fa-times" aria-hidden="true"></i>Î¨∏Íµ¨Ï†ê ÌåêÎß§Ï†ïÎ≥¥Í∞Ä Îì±Î°ùÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§!</div>
     <div id="map" style="width:70%; height:30em; margin: 0 auto;"></div>
{% endif %}

{% if user.is_Stationer %}
     <div style="text-align: right; width: 70%; margin: 0 auto; padding-top: 12px;">
     <!-- Î¨∏Íµ¨Ï†ê ÏÇ¨Ïû•ÎãòÏù∏ Í≤ΩÏö∞ÏóêÎßå ÌåêÎß§Ï†ïÎ≥¥ ÏûÖÎ†•/ÏÇ≠Ï†ú/ÏàòÏ†ï Í∞ÄÎä• -->
     {% if stationerSellInfoRegistered %}
          <a href="{% url 'stationerSellInfoModify' product_id=product.id stationerSellInfo_id=targetStationerInfo.id %}">Î¨∏Íµ¨Ï†ê ÌåêÎß§Ï†ïÎ≥¥ ÏàòÏ†ï</a> /
          <a href="{% url 'stationerSellInfoDelete' product_id=product.id stationerSellInfo_id=targetStationerInfo.id %}">Î¨∏Íµ¨Ï†ê ÌåêÎß§Ï†ïÎ≥¥ ÏÇ≠Ï†ú</a>
     {% else %}
          <a href="{% url 'stationerSellInfoCreate' product_id=product.id %}">Î¨∏Íµ¨Ï†ê ÌåêÎß§Ï†ïÎ≥¥ Ï∂îÍ∞Ä</a>
     {% endif %}
     </div>
{% endif %}

<hr style="width: 70%;">

<div id="videoContainer" style="margin: 2rem aut o;">
     <div style="font-family: 'yg-jalnan'; text-align: center; font-size: large;"><i class="fa fa-youtube-play" aria-hidden="true"></i>Í¥ÄÎ†® ÏòÅÏÉÅ</div>
     {% if hasNoVideos %}
     <div style="font-family: 'yg-jalnan'; text-align: center; font-size: smaller; color: gray;">ÏïÑÏßÅ Í¥ÄÎ†® ÏòÅÏÉÅÏù¥ ÏóÜÎÑ§Ïöî „Ö†„Ö†</div>
     {% else %}
     <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel" style="text-align: center;">
          <div class="carousel-inner">
            <div class="carousel-item active">
               <iframe style="margin: 0 auto;" src="https://www.youtube.com/embed/{{ firstVideoHash }}" frameborder="0"
               allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>

          {% for linkHash in videoLinkHashs %}
          <div class="carousel-item">
               <iframe style="margin: 0 auto;" src="https://www.youtube.com/embed/{{ linkHash }}" frameborder="0"
               allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
          {% endfor %}
     </div>
     {% endif %}
</div>

<script>
     {% if hasStationerSellInfo %}
     var mapContainer = document.getElementById('map'), // ÏßÄÎèÑÎ•º ÌëúÏãúÌï† div 
         mapOption = { 
             center: new kakao.maps.LatLng({{ centerLatitude }}, {{ centerLongitude }}), // ÏßÄÎèÑÏùò Ï§ëÏã¨Ï¢åÌëú
             level: {{ zoomLevel }} // ÏßÄÎèÑÏùò ÌôïÎåÄ Î†àÎ≤®
         };
     
     var map = new kakao.maps.Map(mapContainer, mapOption);
     
     {% for info in stationerSellInfoList %}
     
     // ÎßàÏª§Í∞Ä ÌëúÏãúÎê† ÏúÑÏπòÏûÖÎãàÎã§ 
     var markerPosition  = new kakao.maps.LatLng({{ info.seller.latitude }}, {{ info.seller.longitude }}); 
     
     // ÎßàÏª§Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§
     var marker = new kakao.maps.Marker({
         position: markerPosition
     });
     
     // ÎßàÏª§Í∞Ä ÏßÄÎèÑ ÏúÑÏóê ÌëúÏãúÎêòÎèÑÎ°ù ÏÑ§Ï†ïÌï©ÎãàÎã§
     marker.setMap(map);
     
     {% if info.price == cheapestStationerPrice %}
     var iwContent = "<div style='color: red; text-align: center;'>{{ info.seller.nickname }} : {{ info.price }}</div>", // Ïù∏Ìè¨ÏúàÎèÑÏö∞Ïóê ÌëúÏ∂úÎê† ÎÇ¥Ïö©ÏúºÎ°ú HTML Î¨∏ÏûêÏó¥Ïù¥ÎÇò document elementÍ∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§
         iwPosition = new kakao.maps.LatLng({{ info.seller.latitude }}, {{ info.seller.longitude }}); //Ïù∏Ìè¨ÏúàÎèÑÏö∞ ÌëúÏãú ÏúÑÏπòÏûÖÎãàÎã§
     {% else %}
     var iwContent = "<div>{{ info.seller.nickname }} : {{ info.price }}</div>", // Ïù∏Ìè¨ÏúàÎèÑÏö∞Ïóê ÌëúÏ∂úÎê† ÎÇ¥Ïö©ÏúºÎ°ú HTML Î¨∏ÏûêÏó¥Ïù¥ÎÇò document elementÍ∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§
         iwPosition = new kakao.maps.LatLng({{ info.seller.latitude }}, {{ info.seller.longitude }}); //Ïù∏Ìè¨ÏúàÎèÑÏö∞ ÌëúÏãú ÏúÑÏπòÏûÖÎãàÎã§
     {% endif %}

     // Ïù∏Ìè¨ÏúàÎèÑÏö∞Î•º ÏÉùÏÑ±Ìï©ÎãàÎã§
     var infowindow = new kakao.maps.InfoWindow({
         position : iwPosition, 
         content : iwContent 
     });
       
     // ÎßàÏª§ ÏúÑÏóê Ïù∏Ìè¨ÏúàÎèÑÏö∞Î•º ÌëúÏãúÌï©ÎãàÎã§. ÎëêÎ≤àÏß∏ ÌååÎùºÎØ∏ÌÑ∞Ïù∏ markerÎ•º ÎÑ£Ïñ¥Ï£ºÏßÄ ÏïäÏúºÎ©¥ ÏßÄÎèÑ ÏúÑÏóê ÌëúÏãúÎê©ÎãàÎã§
     infowindow.open(map, marker); 
     
     {% endfor %}
     {% else %}
     var mapContainer = document.getElementById('map'), // ÏßÄÎèÑÎ•º ÌëúÏãúÌï† div 
     mapOption = { 
          center: new kakao.maps.LatLng(33.450701, 126.570667), // ÏßÄÎèÑÏùò Ï§ëÏã¨Ï¢åÌëú
          level: 3 // ÏßÄÎèÑÏùò ÌôïÎåÄ Î†àÎ≤®
     };

     // ÏßÄÎèÑÎ•º ÌëúÏãúÌï† divÏôÄ  ÏßÄÎèÑ ÏòµÏÖòÏúºÎ°ú  ÏßÄÎèÑÎ•º ÏÉùÏÑ±Ìï©ÎãàÎã§
     var map = new kakao.maps.Map(mapContainer, mapOption); 
     {% endif %}
     </script>

     <!-- Ïú†ÌäúÎ∏å Ïù¥ÎØ∏ÏßÄ Ïä¨ÎùºÏù¥Îìú -->
     <script>
          $(document).ready(function () {
    var itemsMainDiv = ('.MultiCarousel');
    var itemsDiv = ('.MultiCarousel-inner');
    var itemWidth = "";

    $('.leftLst, .rightLst').click(function () {
        var condition = $(this).hasClass("leftLst");
        if (condition)
            click(0, this);
        else
            click(1, this)
    });

    ResCarouselSize();




    $(window).resize(function () {
        ResCarouselSize();
    });

    //this function define the size of the items
    function ResCarouselSize() {
        var incno = 0;
        var dataItems = ("data-items");
        var itemClass = ('.item');
        var id = 0;
        var btnParentSb = '';
        var itemsSplit = '';
        var sampwidth = $(itemsMainDiv).width();
        var bodyWidth = $('body').width();
        $(itemsDiv).each(function () {
            id = id + 1;
            var itemNumbers = $(this).find(itemClass).length;
            btnParentSb = $(this).parent().attr(dataItems);
            itemsSplit = btnParentSb.split(',');
            $(this).parent().attr("id", "MultiCarousel" + id);


            if (bodyWidth >= 1200) {
                incno = itemsSplit[3];
                itemWidth = sampwidth / incno;
            }
            else if (bodyWidth >= 992) {
                incno = itemsSplit[2];
                itemWidth = sampwidth / incno;
            }
            else if (bodyWidth >= 768) {
                incno = itemsSplit[1];
                itemWidth = sampwidth / incno;
            }
            else {
                incno = itemsSplit[0];
                itemWidth = sampwidth / incno;
            }
            $(this).css({ 'transform': 'translateX(0px)', 'width': itemWidth * itemNumbers });
            $(this).find(itemClass).each(function () {
                $(this).outerWidth(itemWidth);
            });

            $(".leftLst").addClass("over");
            $(".rightLst").removeClass("over");

        });
    }


    //this function used to move the items
    function ResCarousel(e, el, s) {
        var leftBtn = ('.leftLst');
        var rightBtn = ('.rightLst');
        var translateXval = '';
        var divStyle = $(el + ' ' + itemsDiv).css('transform');
        var values = divStyle.match(/-?[\d\.]+/g);
        var xds = Math.abs(values[4]);
        if (e == 0) {
            translateXval = parseInt(xds) - parseInt(itemWidth * s);
            $(el + ' ' + rightBtn).removeClass("over");

            if (translateXval <= itemWidth / 2) {
                translateXval = 0;
                $(el + ' ' + leftBtn).addClass("over");
            }
        }
        else if (e == 1) {
            var itemsCondition = $(el).find(itemsDiv).width() - $(el).width();
            translateXval = parseInt(xds) + parseInt(itemWidth * s);
            $(el + ' ' + leftBtn).removeClass("over");

            if (translateXval >= itemsCondition - itemWidth / 2) {
                translateXval = itemsCondition;
                $(el + ' ' + rightBtn).addClass("over");
            }
        }
        $(el + ' ' + itemsDiv).css('transform', 'translateX(' + -translateXval + 'px)');
    }

    //It is used to get some elements from btn
    function click(ell, ee) {
        var Parent = "#" + $(ee).parent().attr("id");
        var slide = $(Parent).attr("data-slide");
        ResCarousel(ell, Parent, slide);
    }

});
     </script>
{% endblock %}